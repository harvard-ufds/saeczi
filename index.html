<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Small Area Estimation for Continuous Zero Inflated Data • saeczi</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Small Area Estimation for Continuous Zero Inflated Data">
<meta name="description" content="Provides functionality to fit a zero-inflated estimator for small area estimation. This estimator is a combines a linear mixed effects regression model and a logistic mixed effects regression model via a two-stage modeling approach. The estimators mean squared error is estimated via a parametric bootstrap method. Chandra and others (2012, &lt;doi:10.1080/03610918.2011.598991&gt;) introduce and describe this estimator and mean squared error estimator. White and others (2024+, &lt;doi:10.48550/arXiv.2402.03263&gt;) describe the applicability of this estimator to estimation of forest attributes and further assess the estimators properties.">
<meta property="og:description" content="Provides functionality to fit a zero-inflated estimator for small area estimation. This estimator is a combines a linear mixed effects regression model and a logistic mixed effects regression model via a two-stage modeling approach. The estimators mean squared error is estimated via a parametric bootstrap method. Chandra and others (2012, &lt;doi:10.1080/03610918.2011.598991&gt;) introduce and describe this estimator and mean squared error estimator. White and others (2024+, &lt;doi:10.48550/arXiv.2402.03263&gt;) describe the applicability of this estimator to estimation of forest attributes and further assess the estimators properties.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">saeczi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="saeczi">saeczi<a class="anchor" aria-label="anchor" href="#saeczi"></a>
</h1></div>
<div class="section level3">
<h3 id="small-area-estimation-for-continuous-zero-inflated-data">(Small Area Estimation for Continuous Zero Inflated data)<a class="anchor" aria-label="anchor" href="#small-area-estimation-for-continuous-zero-inflated-data"></a>
</h3>
</div>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p><code>saeczi</code> is an R package that implements a small area estimator that uses a two-stage modeling approach for zero-inflated response variables. In particular, we are working with variables that follow a semi-continuous distribution with a mixture of zeroes and positive continuously distributed values. An example can be seen below.</p>
<p><img src="reference/figures/README-zi-plot-1.png" style="width:60.0%"></p>
<p><code>saeczi</code> first fits a linear mixed model to the non-zero portion of the response and then a generalized linear mixed model with binomial response to classify the probability of zero for a given data point. In estimation these models are each applied to new data points and combined to compute a final prediction.</p>
<p>The package can also generate MSE estimates using a parametric bootstrap approach described in Chandra and Sud (2012) either in parallel or sequentially.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install the latest CRAN release with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"saeczi"</span><span class="op">)</span></span></code></pre></div>
<p>You can also install the developmental version of <code>saeczi</code> from GitHub with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pkg_install.html" class="external-link">pkg_install</a></span><span class="op">(</span><span class="st">"harvard-ufds/saeczi"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>We’ll use the internal package data to show an example of how to use <code>saeczi</code>. The two data sets contained within the package contain example forestry data collected by the Forestry Inventory and Analysis (FIA) research program.</p>
<ul>
<li>
<code><a href="reference/samp.html">saeczi::samp</a></code>: Example FIA plot-level sample data for each county in Oregon.</li>
<li>
<code><a href="reference/pop.html">saeczi::pop</a></code>: Example FIA pixel level population auxiliary data for each county in Oregon.</li>
</ul>
<p>The main response variable included in <code>samp</code> is above ground live biomass and our small areas in this case are the counties in Oregon. To keep things simple we will use tree canopy cover (tcc16) and elevation (elev) as our predictors in both of the models. We can use <code>saeczi</code> to get estimates for the mean biomass in each county as well as the corresponding bootstrapped (B = 500) MSE estimate as follows.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://harvard-ufds.github.io/saeczi/">saeczi</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">pop</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">samp</span><span class="op">)</span></span>
<span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/saeczi.html">saeczi</a></span><span class="op">(</span>samp_dat <span class="op">=</span> <span class="va">samp</span>,</span>
<span>                 pop_dat <span class="op">=</span> <span class="va">pop</span>, </span>
<span>                 lin_formula <span class="op">=</span>  <span class="va">DRYBIO_AG_TPA_live_ADJ</span> <span class="op">~</span> <span class="va">tcc16</span> <span class="op">+</span> <span class="va">elev</span>,</span>
<span>                 log_formula <span class="op">=</span> <span class="va">DRYBIO_AG_TPA_live_ADJ</span> <span class="op">~</span> <span class="va">tcc16</span>,</span>
<span>                 domain_level <span class="op">=</span> <span class="st">"COUNTYFIPS"</span>,</span>
<span>                 mse_est <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                 B <span class="op">=</span> <span class="fl">1000L</span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="return">Return<a class="anchor" aria-label="anchor" href="#return"></a>
</h4>
<p>The function returns the following objects:</p>
<table class="table">
<colgroup>
<col width="12%">
<col width="87%">
</colgroup>
<thead><tr class="header">
<th align="left">Name</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><code>call</code></td>
<td align="left">The original function call</td>
</tr>
<tr class="even">
<td align="left"><code>res</code></td>
<td align="left">A data.frame containing the estimates</td>
</tr>
<tr class="odd">
<td align="left"><code>lin_mod</code></td>
<td align="left">The linear model object of class <code>merMod</code> used to compute the estimates</td>
</tr>
<tr class="even">
<td align="left"><code>log_mod</code></td>
<td align="left">The logistic model object of class <code>merMod</code> used to compute the estimates</td>
</tr>
</tbody>
</table>
<p>As there are 36 total counties in Oregon, we will just look at the first few rows of the results:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span><span class="op">$</span><span class="va">res</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;   COUNTYFIPS        mse       est</span></span>
<span><span class="co">#&gt; 1      41001   38.30647  14.57288</span></span>
<span><span class="co">#&gt; 2      41003  122.90662 103.33016</span></span>
<span><span class="co">#&gt; 3      41005 1069.30963  86.08616</span></span>
<span><span class="co">#&gt; 4      41007 4691.01214  78.79615</span></span>
<span><span class="co">#&gt; 5      41009  356.53805  73.98920</span></span>
<span><span class="co">#&gt; 6      41011  273.34697  90.44174</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="parallelization">Parallelization<a class="anchor" aria-label="anchor" href="#parallelization"></a>
</h3>
<p><code>saeczi</code> supports parallelization through the <code>future</code> package to speed up the bootstrapping process, but requires a small amount of additional work on the part of the user. It is not enough just to specify <code>parallel = TRUE</code> in the function signature as a <code><a href="https://future.futureverse.org/reference/plan.html" class="external-link">future::plan</a></code> must also be specified.</p>
<p>Below is an example that uses multisession’ future resolution with 6 threads:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">future</span><span class="fu">::</span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="st">"multisession"</span>, workers <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span>
<span><span class="va">result_par</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/saeczi.html">saeczi</a></span><span class="op">(</span>samp_dat <span class="op">=</span> <span class="va">samp</span>,</span>
<span>                     pop_dat <span class="op">=</span> <span class="va">pop</span>, </span>
<span>                     lin_formula <span class="op">=</span>  <span class="va">DRYBIO_AG_TPA_live_ADJ</span> <span class="op">~</span> <span class="va">tcc16</span> <span class="op">+</span> <span class="va">elev</span>,</span>
<span>                     log_formula <span class="op">=</span> <span class="va">DRYBIO_AG_TPA_live_ADJ</span> <span class="op">~</span> <span class="va">tcc16</span>,</span>
<span>                     domain_level <span class="op">=</span> <span class="st">"COUNTYFIPS"</span>,</span>
<span>                     mse_est <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                     parallel <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                     B <span class="op">=</span> <span class="fl">1000L</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=saeczi" class="external-link">View on CRAN</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing saeczi</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Josh Yamamoto <br><small class="roles"> Author, maintainer </small>  </li>
<li>Dinan Elsyad <br><small class="roles"> Author </small>  </li>
<li>Grayson White <br><small class="roles"> Author </small>  </li>
<li>Julian Schmitt <br><small class="roles"> Author </small>  </li>
<li>Niels Korsgaard <br><small class="roles"> Author </small>  </li>
<li>Kelly McConville <br><small class="roles"> Author </small>  </li>
<li>Kate Hu <br><small class="roles"> Author </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/harvard-ufds/saeczi/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/harvard-ufds/saeczi/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://CRAN.R-project.org/package=saeczi" class="external-link"><img src="https://www.r-pkg.org/badges/version/saeczi" alt="CRAN status"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Josh Yamamoto, Dinan Elsyad, Grayson White, Julian Schmitt, Niels Korsgaard, Kelly McConville, Kate Hu.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
